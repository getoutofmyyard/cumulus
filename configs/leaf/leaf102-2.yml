---
# Cumulus Linux Leaf Switch Variables - leaf102-2
# Generated from actual configuration

# System Configuration
system:
  hostname: "leaf102-2"
  model: "VX"

# Loopback Configuration
loopback:
  # Unique loopback per switch
  primary_ip: "6.6.6.6/32"
  # Shared/anycast loopback for MLAG pair
  anycast_ip: "10.255.0.2/32"

# BGP Configuration
bgp:
  asn: "65102"
  router_id: "6.6.6.6"
  ipv4_unicast:
    enable: true
    ebgp_multipath: 4
    redistribute_connected: true

# MLAG Configuration
mlag:
  enable: true
  mac_address: "44:38:39:BE:EF:AA"
  backup_ip: "5.5.5.5"
  peer_ip: "169.254.0.254"
  peerlink_members:
    - "swp31"
    - "swp32"
  peerlink_vlan: 4094
  peerlink_ipv4: "169.254.0.255/31"

# VRR (Virtual Router Redundancy) Configuration
vrr:
  enable: true

# NVE/VXLAN Configuration
nve:
  vxlan:
    enable: true
    arp_nd_suppress: true
    mac_learning: false
    source_address: "6.6.6.6"
    mlag_shared_address: "10.255.0.2"
    flooding:
      enable: false
      head_end_replication: "" # Remote MLAG pair anycast IP

# VLANs Configuration
vlans:
  - id: "10"
    vni: "10"
    svi:
      enable: true
      ipv4_address: "192.168.10.5/24"
      vrr_address: "192.168.10.1/24"
  - id: "20"
    vni: "20"
    svi:
      enable: true
      ipv4_address: "192.168.20.5/24"
      vrr_address: "192.168.20.1/24"

# Uplink Interfaces (to spines)
uplinks:
  - interface: "swp1"
    ipv4_address: "10.0.0.7/31"
    bgp_neighbor: "10.0.0.6"
    bgp_remote_as: "65501"
  - interface: "swp2"
    ipv4_address: "10.0.0.15/31"
    bgp_neighbor: "10.0.0.14"
    bgp_remote_as: "65502"

# Access Bonds (MLAG bonds to hosts/servers)
access_bonds:
  - name: "bond29"
    members:
      - "swp29"
    mlag_id: "29"
    access_vlan: "20"
  - name: "bond30"
    members:
      - "swp30"
    mlag_id: "30"
    access_vlan: "10"

# iBGP Peer (MLAG peer for routing synchronization)
ibgp_peer:
  neighbor_ip: "169.254.0.254"
  remote_as: "65102"
  nexthop_self: true

# External BGP Peers (e.g., border/WAN connections)
external_bgp_peers: []

# EVPN Configuration (if using EVPN)
evpn:
  enable: true  # Set to true when enabling EVPN
  vnis:
    - vni_id: "10"
      route_target: "65510:10"
    - vni_id: "20"
      route_target: "65520:20"
  bgp_peers:
    - neighbor_ip: "1.1.1.1"  # Spine1
      remote_as: "65501"
      multihop_ttl: 5
    - neighbor_ip: "2.2.2.2"  # Spine2
      remote_as: "65502"
      multihop_ttl: 5
